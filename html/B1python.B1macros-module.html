<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>B1python.B1macros</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="B1python-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="B1python-module.html">Package&nbsp;B1python</a> ::
        Module&nbsp;B1macros
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="B1python.B1macros-module.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== MODULE DESCRIPTION ==================== -->
<h1 class="epydoc">Module B1macros</h1><p class="nomargin-top"><span class="codelink"><a href="B1python.B1macros-pysrc.html">source&nbsp;code</a></span></p>
<!-- ==================== FUNCTIONS ==================== -->
<a name="section-Functions"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Functions</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Functions"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="B1python.B1macros-module.html#setconfig" class="summary-sig-name">setconfig</a>(<span class="summary-sig-arg">config</span>)</span><br />
      Set _B1config dict.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="B1python.B1macros-pysrc.html#setconfig">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="B1python.B1macros-module.html#getconfig" class="summary-sig-name">getconfig</a>()</span><br />
      Get _B1config dict.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="B1python.B1macros-pysrc.html#getconfig">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="B1python.B1macros-module.html#reintegrateBessy" class="summary-sig-name">reintegrateBessy</a>(<span class="summary-sig-arg">fsn</span>,
        <span class="summary-sig-arg">filenameformat</span>,
        <span class="summary-sig-arg">mask</span>,
        <span class="summary-sig-arg">thicknesses</span>,
        <span class="summary-sig-arg">referencethickness</span>,
        <span class="summary-sig-arg">referenceindex</span>,
        <span class="summary-sig-arg">doffset</span>,
        <span class="summary-sig-arg">step2cm</span>,
        <span class="summary-sig-arg">resol</span>,
        <span class="summary-sig-arg">energyapp</span>,
        <span class="summary-sig-arg">energytheor</span>,
        <span class="summary-sig-arg">ref_qrange</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">qphirange</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">center_override</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">inttype</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">radial</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">int_aux</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">save_with_extension</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">noplot</span>=<span class="summary-sig-default">False</span>)</span><br />
      Re-integrate 2d corrected SAXS patterns to q-bins.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="B1python.B1macros-pysrc.html#reintegrateBessy">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="addfsns"></a><span class="summary-sig-name">addfsns</span>(<span class="summary-sig-arg">fileprefix</span>,
        <span class="summary-sig-arg">fsns</span>,
        <span class="summary-sig-arg">fileend</span>,
        <span class="summary-sig-arg">fieldinheader</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">valueoffield</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">dirs</span>=<span class="summary-sig-default"><code class="variable-group">[</code><code class="variable-group">]</code></span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="B1python.B1macros-pysrc.html#addfsns">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="B1python.B1macros-module.html#makesensitivity2" class="summary-sig-name">makesensitivity2</a>(<span class="summary-sig-arg">fsnrange</span>,
        <span class="summary-sig-arg">energypre</span>,
        <span class="summary-sig-arg">energypost</span>,
        <span class="summary-sig-arg">title</span>,
        <span class="summary-sig-arg">fsnDC</span>,
        <span class="summary-sig-arg">energymeas</span>,
        <span class="summary-sig-arg">energycalib</span>,
        <span class="summary-sig-arg">energyfluorescence</span>,
        <span class="summary-sig-arg">origx</span>,
        <span class="summary-sig-arg">origy</span>,
        <span class="summary-sig-arg">mask</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">savefile</span>=<span class="summary-sig-default">None</span>)</span><br />
      Create matrix for detector sensitivity correction</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="B1python.B1macros-pysrc.html#makesensitivity2">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="B1python.B1macros-module.html#makesensitivity" class="summary-sig-name">makesensitivity</a>(<span class="summary-sig-arg">fsn1</span>,
        <span class="summary-sig-arg">fsn2</span>,
        <span class="summary-sig-arg">fsnend</span>,
        <span class="summary-sig-arg">fsnDC</span>,
        <span class="summary-sig-arg">energymeas</span>,
        <span class="summary-sig-arg">energycalib</span>,
        <span class="summary-sig-arg">energyfluorescence</span>,
        <span class="summary-sig-arg">origx</span>,
        <span class="summary-sig-arg">origy</span>)</span><br />
      Create matrix for detector sensitivity correction</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="B1python.B1macros-pysrc.html#makesensitivity">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="B1python.B1macros-module.html#B1normint1" class="summary-sig-name">B1normint1</a>(<span class="summary-sig-arg">fsn1</span>,
        <span class="summary-sig-arg">thicknesses</span>,
        <span class="summary-sig-arg">orifsn</span>,
        <span class="summary-sig-arg">fsndc</span>,
        <span class="summary-sig-arg">sens</span>,
        <span class="summary-sig-arg">errorsens</span>,
        <span class="summary-sig-arg">mask</span>,
        <span class="summary-sig-arg">energymeas</span>,
        <span class="summary-sig-arg">energycalib</span>,
        <span class="summary-sig-arg">distminus</span>=<span class="summary-sig-default">0</span>,
        <span class="summary-sig-arg">detshift</span>=<span class="summary-sig-default">0</span>,
        <span class="summary-sig-arg">orig</span>=<span class="summary-sig-default"><code class="variable-group">[</code>122<code class="variable-op">, </code>123.5<code class="variable-group">]</code></span>,
        <span class="summary-sig-arg">transm</span>=<span class="summary-sig-default">None</span>)</span><br />
      Integrate, normalize, do absolute calibration...</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="B1python.B1macros-pysrc.html#B1normint1">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="B1python.B1macros-module.html#B1findbeam" class="summary-sig-name">B1findbeam</a>(<span class="summary-sig-arg">data</span>,
        <span class="summary-sig-arg">header</span>,
        <span class="summary-sig-arg">orifsn</span>,
        <span class="summary-sig-arg">orig</span>,
        <span class="summary-sig-arg">mask</span>)</span><br />
      Find origin (beam position) on scattering images</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="B1python.B1macros-pysrc.html#B1findbeam">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="B1python.B1macros-module.html#B1integrate" class="summary-sig-name">B1integrate</a>(<span class="summary-sig-arg">fsn1</span>,
        <span class="summary-sig-arg">fsndc</span>,
        <span class="summary-sig-arg">sens</span>,
        <span class="summary-sig-arg">errorsens</span>,
        <span class="summary-sig-arg">orifsn</span>,
        <span class="summary-sig-arg">mask</span>,
        <span class="summary-sig-arg">energymeas</span>,
        <span class="summary-sig-arg">energycalib</span>,
        <span class="summary-sig-arg">distminus</span>=<span class="summary-sig-default">0</span>,
        <span class="summary-sig-arg">detshift</span>=<span class="summary-sig-default">0</span>,
        <span class="summary-sig-arg">orig</span>=<span class="summary-sig-default"><code class="variable-group">[</code>122<code class="variable-op">, </code>123.5<code class="variable-group">]</code></span>,
        <span class="summary-sig-arg">transm</span>=<span class="summary-sig-default">None</span>)</span><br />
      Integrate a sequence</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="B1python.B1macros-pysrc.html#B1integrate">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="geomcorrectiontheta"></a><span class="summary-sig-name">geomcorrectiontheta</span>(<span class="summary-sig-arg">tth</span>,
        <span class="summary-sig-arg">dist</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="B1python.B1macros-pysrc.html#geomcorrectiontheta">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="B1python.B1macros-module.html#absorptionangledependenttth" class="summary-sig-name">absorptionangledependenttth</a>(<span class="summary-sig-arg">tth</span>,
        <span class="summary-sig-arg">transm</span>,
        <span class="summary-sig-arg">diffaswell</span>=<span class="summary-sig-default">False</span>)</span><br />
      Create matrix for correction by angle-dependent X-ray absorption</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="B1python.B1macros-pysrc.html#absorptionangledependenttth">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="B1python.B1macros-module.html#gasabsorptioncorrectiontheta" class="summary-sig-name">gasabsorptioncorrectiontheta</a>(<span class="summary-sig-arg">energycalibrated</span>,
        <span class="summary-sig-arg">tth</span>,
        <span class="summary-sig-arg">components</span>=<span class="summary-sig-default">None</span>)</span><br />
      Create matrix for correction by absorption of the various elements of the
X-ray scattering set-up</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="B1python.B1macros-pysrc.html#gasabsorptioncorrectiontheta">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="B1python.B1macros-module.html#subtractbg" class="summary-sig-name">subtractbg</a>(<span class="summary-sig-arg">data</span>,
        <span class="summary-sig-arg">header</span>,
        <span class="summary-sig-arg">fsndc</span>,
        <span class="summary-sig-arg">sens</span>,
        <span class="summary-sig-arg">senserr</span>,
        <span class="summary-sig-arg">transm</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">oldversion</span>=<span class="summary-sig-default">False</span>)</span><br />
      Subtract dark current and empty beam from the measurements and
carry out corrections for detector sensitivity, dead time and beam
flux (monitor counter).</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="B1python.B1macros-pysrc.html#subtractbg">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="B1python.B1macros-module.html#subdc" class="summary-sig-name">subdc</a>(<span class="summary-sig-arg">data</span>,
        <span class="summary-sig-arg">header</span>,
        <span class="summary-sig-arg">datadc</span>,
        <span class="summary-sig-arg">headerdc</span>,
        <span class="summary-sig-arg">sens</span>,
        <span class="summary-sig-arg">senserr</span>,
        <span class="summary-sig-arg">transm</span>=<span class="summary-sig-default">None</span>)</span><br />
      Carry out dead-time corrections (anode counts/sum) on 2D
    scattering data, subtract dark current, normalize by monitor
    counts and sensitivity, and finally by pixel size.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="B1python.B1macros-pysrc.html#subdc">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="B1python.B1macros-module.html#rebin" class="summary-sig-name">rebin</a>(<span class="summary-sig-arg">data</span>,
        <span class="summary-sig-arg">qrange</span>)</span><br />
      Rebin 1D data.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="B1python.B1macros-pysrc.html#rebin">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="B1python.B1macros-module.html#scalewaxs" class="summary-sig-name">scalewaxs</a>(<span class="summary-sig-arg">fsns</span>,
        <span class="summary-sig-arg">mask2d</span>)</span><br />
      Scale waxs curves to saxs files</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="B1python.B1macros-pysrc.html#scalewaxs">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="B1python.B1macros-module.html#reintegrateB1" class="summary-sig-name">reintegrateB1</a>(<span class="summary-sig-arg">fsnrange</span>,
        <span class="summary-sig-arg">mask</span>,
        <span class="summary-sig-arg">qrange</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">samples</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">savefiletype</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">intbinned</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">dirs</span>=<span class="summary-sig-default"><code class="variable-group">[</code><code class="variable-group">]</code></span>)</span><br />
      Re-integrate (re-bin) 2d intensity data</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="B1python.B1macros-pysrc.html#reintegrateB1">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="B1python.B1macros-module.html#sumfsns" class="summary-sig-name">sumfsns</a>(<span class="summary-sig-arg">fsns</span>,
        <span class="summary-sig-arg">samples</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">filetype</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">intnorm</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">waxsfiletype</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string">waxsscaled</code><code class="variable-quote">'</code></span>,
        <span class="summary-sig-arg">dirs</span>=<span class="summary-sig-default"><code class="variable-group">[</code><code class="variable-group">]</code></span>)</span><br />
      Summarize scattering data.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="B1python.B1macros-pysrc.html#sumfsns">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== VARIABLES ==================== -->
<a name="section-Variables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-Variables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="HC"></a><span class="summary-name">HC</span> = <code title="12398.419">12398.419</code>
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="B1python.B1macros-module.html#_B1config" class="summary-name" onclick="show_private();">_B1config</a> = <code title="{'2dfilepostfix': '.DAT',
 '2dfileprefix': 'ORG',
 'GCareathreshold': 10,
 'GCintsthreshold': 1,
 'GCtransmission': None,
 'calibdir': '.',
 'detector': 'Gabriel',
 'detshift': 0,
..."><code class="variable-group">{</code><code class="variable-quote">'</code><code class="variable-string">2dfilepostfix</code><code class="variable-quote">'</code><code class="variable-op">: </code><code class="variable-quote">'</code><code class="variable-string">.DAT</code><code class="variable-quote">'</code><code class="variable-op">, </code><code class="variable-quote">'</code><code class="variable-string">2dfileprefix</code><code class="variable-quote">'</code><code class="variable-op">: </code><code class="variable-quote">'</code><code class="variable-string">ORG</code><code class="variable-quote">'</code><code class="variable-op">, </code><code class="variable-quote">'</code><code class="variable-ellipsis">...</code></code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="__package__"></a><span class="summary-name">__package__</span> = <code title="'B1python'"><code class="variable-quote">'</code><code class="variable-string">B1python</code><code class="variable-quote">'</code></code>
    </td>
  </tr>
</table>
<!-- ==================== FUNCTION DETAILS ==================== -->
<a name="section-FunctionDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Function Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-FunctionDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="setconfig"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">setconfig</span>(<span class="sig-arg">config</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="B1python.B1macros-pysrc.html#setconfig">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Set _B1config dict.

Input:
    config: B1config dict. For details, look at the source of B1macros.py

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="getconfig"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">getconfig</span>()</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="B1python.B1macros-pysrc.html#getconfig">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Get _B1config dict.

Output:
    the _B1config dictionary. For details, look at the source of B1macros.py

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="reintegrateBessy"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">reintegrateBessy</span>(<span class="sig-arg">fsn</span>,
        <span class="sig-arg">filenameformat</span>,
        <span class="sig-arg">mask</span>,
        <span class="sig-arg">thicknesses</span>,
        <span class="sig-arg">referencethickness</span>,
        <span class="sig-arg">referenceindex</span>,
        <span class="sig-arg">doffset</span>,
        <span class="sig-arg">step2cm</span>,
        <span class="sig-arg">resol</span>,
        <span class="sig-arg">energyapp</span>,
        <span class="sig-arg">energytheor</span>,
        <span class="sig-arg">ref_qrange</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">qphirange</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">center_override</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">inttype</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">radial</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">int_aux</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">save_with_extension</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">noplot</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="B1python.B1macros-pysrc.html#reintegrateBessy">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Re-integrate 2d corrected SAXS patterns to q-bins.

Inputs:
    fsn: range of file sequence numbers. Only give one ASAXS
        sequence at a time! The first fsn should be the first frame
        of the sequence.
    filenameformat: C-style format string for the filename without
        extension, e.g. 's%07u_000'
    mask: mask matrix. 0 is masked, 1 is unmasked
    thicknesses: a single thickness value for all measurements OR a
        dictionary, the keys being the sample names. In cm-s.
    referencethickness: thickness of the reference sample, in microns
    referenceindex: the index of the reference measurement in the
        sequence. 0 is the first measurement (usually empty beam).
    doffset: additive correction to the detector position read from
        the BDF file. In cm-s.
    step2cm: multiplicative correction to the detector position read
        from the BDF file. The true sample-to-detector distance is
        calculated: SD [cm] = detx*step2cm+doffset
    resol: resolution of the detector (pixel size), in mm/pixel
    energyapp: list of apparent energies
    energytheor: list of theoretical energies, corresponding to the
        apparent energies
    ref_qrange: q-range to be taken into account for the reference.
        Only the first and the last value of this will be used. Set
        it to None if the complete available reference dataset is to
        be used.
    qphirange: if a vector, the q- or theta-range onto which the
        integration is to be carried out. If an integer, the number
        of bins. In this case, the smallest and largest border is
        auto-determined. If None, the whole q- or phi-range will be
        auto-determined.
    center_override: if you want to set the beam center by hand. Leave
        it None if you want to use the default value (read from the
        bdf file).
    inttype: integration mode: 'r[adial]', 's[ector]' or
        'a[zimuthal]'. Case-insensitive.
    int_aux: auxiliary data for integration. If sector integration is
        preferred, then this should be a list of two. The first value
        is the starting azimuth angle, the second is the arc angle,
        both in radians. If azimuthal integration is requested, these
        are the smallest and largest q-values to be taken into account.
    save_with_extension: a string to append to the filename, just
        before the extension. If None, it will be the integration method.
    noplot: set this to True to suppress plotting.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="makesensitivity2"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">makesensitivity2</span>(<span class="sig-arg">fsnrange</span>,
        <span class="sig-arg">energypre</span>,
        <span class="sig-arg">energypost</span>,
        <span class="sig-arg">title</span>,
        <span class="sig-arg">fsnDC</span>,
        <span class="sig-arg">energymeas</span>,
        <span class="sig-arg">energycalib</span>,
        <span class="sig-arg">energyfluorescence</span>,
        <span class="sig-arg">origx</span>,
        <span class="sig-arg">origy</span>,
        <span class="sig-arg">mask</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">savefile</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="B1python.B1macros-pysrc.html#makesensitivity2">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Create matrix for detector sensitivity correction

Inputs:
    fsnrange: FSN range of the sensitivity measurement
    energypre: apparent (uncalibrated) energy of the pre-edge measurements
    energypost: apparent (uncalibrated) energy of the after-edge measurements
    title: title of the sensitivity foil measurements. If the measurements
        were recorded with more titles, give a list of strings.
    fsnDC: a single number or a list of FSN-s for dark current
        measurements
    energymeas: apparent energies for energy calibration
    energycalib: calibrated energies for energy calibration
    energyfluorescence: energy of the fluorescence
    origx, origy: the centers of the beamstop (row, column), starting from 1.
    mask: a mask to apply (1 for valid, 0 for masked pixels). If None,
        a makemask() window will pop up for user interaction.
    savefile: a .npz file to save results to. None to skip saving.
    
Outputs: sensdict
    sens: a dictionary of the following fields:
        sens: the sensitivity matrix of the 2D detector, by which all
            measured data should be divided pointwise. The matrix is
            normalized to 1 on the average.
        errorsens: the calculated error of the sensitivity matrix
        chia, chim, alpha, beta, S1S: these values (4 matrices and
            a scalar) are needed for calculation of the correction
            terms (taking the dependence of a_0... and S into
            account)

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="makesensitivity"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">makesensitivity</span>(<span class="sig-arg">fsn1</span>,
        <span class="sig-arg">fsn2</span>,
        <span class="sig-arg">fsnend</span>,
        <span class="sig-arg">fsnDC</span>,
        <span class="sig-arg">energymeas</span>,
        <span class="sig-arg">energycalib</span>,
        <span class="sig-arg">energyfluorescence</span>,
        <span class="sig-arg">origx</span>,
        <span class="sig-arg">origy</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="B1python.B1macros-pysrc.html#makesensitivity">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Create matrix for detector sensitivity correction

Inputs:
    fsn1: file sequence number for first measurement of foil at energy E1
    fsn2: file sequence number for first measurement of foil at energy E2
    fsnend: last FSN in the sensitivity measurement sequence
    fsnDC: a single number or a list of FSN-s for dark current
        measurements
    energymeas: apparent energies for energy calibration
    energycalib: calibrated energies for energy calibration
    energyfluorescence: energy of the fluorescence
    origx, origy: the centers of the beamstop (row,column), starting from 1

Outputs: sens,errorsens,mask
    sens: the sensitivity matrix of the 2D detector, by which all
        measured data should be divided pointwise. The matrix is
        normalized to 1 on the average.
    errorsens: the error of the sensitivity matrix.
    mask: mask matrix created by the user. This masks values where
        the sensitivity is invalid. This should be used as a base
        for further mask matrices.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="B1normint1"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">B1normint1</span>(<span class="sig-arg">fsn1</span>,
        <span class="sig-arg">thicknesses</span>,
        <span class="sig-arg">orifsn</span>,
        <span class="sig-arg">fsndc</span>,
        <span class="sig-arg">sens</span>,
        <span class="sig-arg">errorsens</span>,
        <span class="sig-arg">mask</span>,
        <span class="sig-arg">energymeas</span>,
        <span class="sig-arg">energycalib</span>,
        <span class="sig-arg">distminus</span>=<span class="sig-default">0</span>,
        <span class="sig-arg">detshift</span>=<span class="sig-default">0</span>,
        <span class="sig-arg">orig</span>=<span class="sig-default"><code class="variable-group">[</code>122<code class="variable-op">, </code>123.5<code class="variable-group">]</code></span>,
        <span class="sig-arg">transm</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="B1python.B1macros-pysrc.html#B1normint1">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Integrate, normalize, do absolute calibration... on a sequence

Inputs:
    fsn1: a single number or a list of FSNs.
    thicknesses: either one thickness in cm or a dictionary,
        containing thickness values for each sample. For example, if
        you have measured My_Samplename_1, Al2O3, DPPC_CdS with
        thicknesses 1, 1.2 and 0.5 mm, respectively, then you should
        give: thicknesses={'My_Samplename_1':0.1,'Al2O3':0.12,
            'DPPC_CdS':0.05}
    orifsn: which element of the sequence should be used for
        determining the origin. 0 means empty beam...
        Or you can give a tuple or a list of two: in this case these
        will be the coordinates of the origin and no auto-searching
        will be performed.
    fsndc: one FSN or a list of FSNS corresponding to the empty beam
        measurements. If sens is a sensitivity dict, this value will
        be disregarded.
    sens: sensitivity matrix, or a sensitivity dict.
    errorsens: error of the sensitivity matrix. If sens is a sensitivity
        dict, this value will be disregarded.
    mask: mask matrix
    energymeas: list of apparent energies, for energy calibration
    energycalib: list of theoretical energies, corresponding to the
        apparent energies.
    distminus: this will be subtracted from the sample-to-detector
        distance read from the measurement files, but only for
        samples, not for references
    detshift: this will be subtracted from the sample-to-detector
        distance read from all measurement files, including
        references!
    orig: first guess for the origin. A list of two.
    
Outputs:
    qs: q-scales of intensities
    ints: intensities
    errs: errors
    header: header dictionaries

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="B1findbeam"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">B1findbeam</span>(<span class="sig-arg">data</span>,
        <span class="sig-arg">header</span>,
        <span class="sig-arg">orifsn</span>,
        <span class="sig-arg">orig</span>,
        <span class="sig-arg">mask</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="B1python.B1macros-pysrc.html#B1findbeam">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Find origin (beam position) on scattering images

Inputs:
    data: list of scattering image matrices of one sequence
    header: list of header structures corresponding to data.
    orifsn: which element of &lt;data&gt; and &lt;header&gt; should be used for
        determining the origin. 0 means empty beam.
        Or you can give a tuple or a list of two: in this case these
        will be the coordinates of the origin and no auto-searching
        will be performed.
    mask: mask matrix. 1 for non-masked, 0 for masked
    orig: helper data for the beam finding procedures. You have
        several possibilities:
        A) a vector/list/tuple of TWO: findbeam_sector() will be
            tried. In this case this is the initial value of the
            beam center
        B) a vector/list/tuple of FOUR: xmin,xmax,ymin,ymax:
            the borders of the rectangle, around the beam, if a
            semitransparent beam-stop was used. In this case
            findbeam_semitransparent() will be tried, and the beam
            center will be determined for each measurement,
            independently (disregarding the value of orifsn).
        C) a vector/list/tuple of FIVE: Ntheta,dmin,dmax,bcx,bcy:
            findbeam_azimuthal will be used. Ntheta, dmin and dmax
            are the respective parameters for azimintpix(), while
            bcx and bcy are the x and y coordinates for the origin
            at the first guess.
        D) a mask matrix (1 means nonmasked, 0 means masked), the
            same size as that of the measurement data. In this
            case findbeam_gravity() will be used.
    transm: you can give this if you know the transmission of the
        sample from another measurement. Leave it None to use the
        measured transmission.
        
Outputs: 
    coords: a list of tuples: each tuple contains the beam center
        coordinates of the corresponding scattering measurement. The
        beam positions are saved to the headers as well.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="B1integrate"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">B1integrate</span>(<span class="sig-arg">fsn1</span>,
        <span class="sig-arg">fsndc</span>,
        <span class="sig-arg">sens</span>,
        <span class="sig-arg">errorsens</span>,
        <span class="sig-arg">orifsn</span>,
        <span class="sig-arg">mask</span>,
        <span class="sig-arg">energymeas</span>,
        <span class="sig-arg">energycalib</span>,
        <span class="sig-arg">distminus</span>=<span class="sig-default">0</span>,
        <span class="sig-arg">detshift</span>=<span class="sig-default">0</span>,
        <span class="sig-arg">orig</span>=<span class="sig-default"><code class="variable-group">[</code>122<code class="variable-op">, </code>123.5<code class="variable-group">]</code></span>,
        <span class="sig-arg">transm</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="B1python.B1macros-pysrc.html#B1integrate">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Integrate a sequence

Inputs:
    fsn1: range of fsns. The first should be the empty beam
        measurement.
    fsndc: one FSN or a list of FSNS corresponding to the empty beam
        measurements. If sens is a sensitivity dict, this value will
        be disregarded.
    sens: sensitivity matrix, or a sensitivity dict.
    errorsens: error of the sensitivity matrix. If sens is a
        sensitivity dict, this value will be disregarded.
    orifsn: which element of the sequence should be used for
        determining the origin. 0 means empty beam...
        Or you can give a tuple or a list of two: in this case these
        will be the coordinates of the origin and no auto-searching
        will be performed.
    mask: mask matrix. 1 for non-masked, 0 for masked
    energymeas: list of apparent energies, for energy calibration
    energycalib: list of theoretical energies, corresponding to the
        apparent energies.
    distminus: this will be subtracted from the sample-to-detector
        distance read from the measurement files, but only for
        samples, not for references
    detshift: this will be subtracted from the sample-to-detector
        distance read from all measurement files, including
        references!
    orig: helper data for the beam finding procedures. You have
        several possibilities:
        A) a vector/list/tuple of two: findbeam_sector() will be
            tried. In this case this is the initial value of the
            beam center
        B) a vector/list/tuple of four: xmin,xmax,ymin,ymax:
            the borders of the rectangle, around the beam, if a
            semitransparent beam-stop was used. In this case
            findbeam_semitransparent() will be tried, and the beam
            center will be determined for each measurement,
            independently (disregarding orifsn).
        C) a vector/list/tuple of five: Ntheta,dmin,dmax,bcx,bcy:
            findbeam_azimuthal will be used. Ntheta, dmin and dmax
            are the respective parameters for azimintpix(), while
            bcx and bcy are the x and y coordinates for the origin
            at the first guess.
        D) a mask matrix (1 means nonmasked, 0 means masked), the
            same size as that of the measurement data. In this
            case findbeam_gravity() will be used.
    transm: you can give this if you know the transmission of the
        sample from another measurement. Leave it None to use the
        measured transmission.
        
Outputs: qs,ints,errs,Areas,As,Aerrs,header
    qs: q-range. Automatically determined from the mask, the energy
        and the sample-to-detector distance
    ints: intensities corresponding to the q values
    errs: calculated absolute errors
    Areas: effective areas during integration
    As: list of corrected 2D data
    Aerrs: list of corrected 2D errors
    header: header dictionaries

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="absorptionangledependenttth"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">absorptionangledependenttth</span>(<span class="sig-arg">tth</span>,
        <span class="sig-arg">transm</span>,
        <span class="sig-arg">diffaswell</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="B1python.B1macros-pysrc.html#absorptionangledependenttth">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Create matrix for correction by angle-dependent X-ray absorption

Inputs:
    tth: two-theta values
    transm: transmission (e^(-mu*d))
    diffaswell: set True if you want to calculate the derivative (with
        respect to trasm) as well
Output: C, [dC]
    C: a matrix of the sape of tth, containing the correction factors for
    angle-dependent absorption. The scattering data should be multiplied
    by this.
    dC: the derivative of C, with respect of transm. Only returned if
        diffaswell was True.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="gasabsorptioncorrectiontheta"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">gasabsorptioncorrectiontheta</span>(<span class="sig-arg">energycalibrated</span>,
        <span class="sig-arg">tth</span>,
        <span class="sig-arg">components</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="B1python.B1macros-pysrc.html#gasabsorptioncorrectiontheta">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Create matrix for correction by absorption of the various elements of the
X-ray scattering set-up

Inputs:
    energycalibrated: the calibrated energy, in eV-s
    tth: matrix of two-theta values
    components: components of the flight path. Give None for default, which
        corresponds to the set-up of beamline B1 at Hasylab/DESY, with the
        Gabriel detector. You can supply a list of dictionaries. In each
        dictionary the following fields should be given:
        'name': the name of the element
        'thick' : the thickness, in mm
        'data' : the data file name (without the pathname) where the
            transmission data can be found. They are text files with two
            columns: first the energy, second the transmission.

Outputs:
    the correction matrix of the same shape as tth. The scattering data
    should be multiplied by this one. If you are interested how this is
    accomplished, please look at the source code...

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="subtractbg"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">subtractbg</span>(<span class="sig-arg">data</span>,
        <span class="sig-arg">header</span>,
        <span class="sig-arg">fsndc</span>,
        <span class="sig-arg">sens</span>,
        <span class="sig-arg">senserr</span>,
        <span class="sig-arg">transm</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">oldversion</span>=<span class="sig-default">False</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="B1python.B1macros-pysrc.html#subtractbg">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Subtract dark current and empty beam from the measurements and
carry out corrections for detector sensitivity, dead time and beam
flux (monitor counter).

Inputs:
    data: list of scattering image matrices
    header: list of header dictionaries
    fsndc: FSN for the dark current measurements. Can be a single
        integer number or a list of numbers. In the latter case the
        DC data are summed up. However, if sens is a sensitivity
        dict, this value will be disregarded.
    sens: sensitivity matrix, or a sensitivity dict.
    senserr: error of the sensitivity matrix. If sens is a
        sensitivity dict, this value will be disregarded.
    transm: if given, disregard the measured transmission of the
        sample.
    oldversion: do an old-style error propagation (an approximation
        only, not a true and mathematically exact error propagation)
Outputs: Asub,errAsub,header,injectionEB
    Asub: the corrected matrix
    errAsub: the error of the corrected matrix
    header: header data
    injectionEB: 'y' if an injection between the empty beam and
        sample measurement occured. 'n' otherwise

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="subdc"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">subdc</span>(<span class="sig-arg">data</span>,
        <span class="sig-arg">header</span>,
        <span class="sig-arg">datadc</span>,
        <span class="sig-arg">headerdc</span>,
        <span class="sig-arg">sens</span>,
        <span class="sig-arg">senserr</span>,
        <span class="sig-arg">transm</span>=<span class="sig-default">None</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="B1python.B1macros-pysrc.html#subdc">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Carry out dead-time corrections (anode counts/sum) on 2D
    scattering data, subtract dark current, normalize by monitor
    counts and sensitivity, and finally by pixel size.

Inputs:
    data: list of 2d scattering images, to be added
    header: list of header data, to be added
    datadc: list of 2d scattering images for dark current
        measurement, to be added
    headerdc: list of header data for dark current measurement, to
        be added up.
    sens: sensitivity matrix
    senserr: error matrix of the sensitivity data
    
Outputs:
    the normalized data and its error matrix

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="rebin"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">rebin</span>(<span class="sig-arg">data</span>,
        <span class="sig-arg">qrange</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="B1python.B1macros-pysrc.html#rebin">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Rebin 1D data. Note: if 2D data is present, reintegrateB1 is more accurate.

Inputs:
    data: one or more (=list) of scattering data dictionaries (with fields
        'q', 'Intensity' and 'Error')
    qrange: the new q-range to which the binning should be carried out.

Outputs:
    the re-binned dataset in a scattering data dictionary

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="scalewaxs"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">scalewaxs</span>(<span class="sig-arg">fsns</span>,
        <span class="sig-arg">mask2d</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="B1python.B1macros-pysrc.html#scalewaxs">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Scale waxs curves to saxs files

Inputs:
    fsns: fsn range
    mask2d: mask for the 2d scattering matrices. Zero is masked, nonzero is non-masked.
    
Outputs:
    waxsscaled%d.dat files are saved
    
Notes:
    The overlap of the SAXS and WAXS q-ranges is found. After it the SAXS
    curves are re-binned (re-integrated) to those q-bins, and the
    multiplication factor is calculated from the integrals.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="reintegrateB1"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">reintegrateB1</span>(<span class="sig-arg">fsnrange</span>,
        <span class="sig-arg">mask</span>,
        <span class="sig-arg">qrange</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">samples</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">savefiletype</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">intbinned</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">dirs</span>=<span class="sig-default"><code class="variable-group">[</code><code class="variable-group">]</code></span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="B1python.B1macros-pysrc.html#reintegrateB1">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Re-integrate (re-bin) 2d intensity data

Inputs:
    fsnrange: FSN-s of measurements. Measurement files around only one edge
        should be given.
    mask: mask matrix. Zero means masked, nonzero means non-masked.
    qrange [optional]: If it has more than one elements, then the q-points
        in which the intensity is requested. If a single value, the number
        of q-bins between the minimal and maximal q-value determined auto-
        matically. If not given, a default common q-range is calculated
        taking the sample-detector-distance, the lowest and highest energy
        and the mask into account.
    samples [optional]: a list of strings or a single string containing the
        names of samples to be treated. If omitted, all samples will be
        reintegrated.
    savefiletype: the first part of the files to be saved. Default is
        'intbinned'
    dirs: directories for searching input files.
    
Outputs:
    &lt;savefiletype&gt;*.dat files are saved to the disk.
    
Note:
    the int2dnorm*.mat files along with the respective intnorm*.log files
    should reside in the current directory or one of the directories in 
    &lt;dirs&gt;

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="sumfsns"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">sumfsns</span>(<span class="sig-arg">fsns</span>,
        <span class="sig-arg">samples</span>=<span class="sig-default">None</span>,
        <span class="sig-arg">filetype</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">intnorm</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">waxsfiletype</span>=<span class="sig-default"><code class="variable-quote">'</code><code class="variable-string">waxsscaled</code><code class="variable-quote">'</code></span>,
        <span class="sig-arg">dirs</span>=<span class="sig-default"><code class="variable-group">[</code><code class="variable-group">]</code></span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="B1python.B1macros-pysrc.html#sumfsns">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <pre class="literalblock">
Summarize scattering data.

Inputs:
    fsns: FSN range
    samples: samples to evaluate. Leave it None to auto-determine
    filetype: 1D SAXS filetypes (ie. the beginning of the file) to summarize. 
    waxsfiletype: WAXS filetypes (ie. the beginning of the file) to summarize.
    dirs: directories for searching input files.

</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== VARIABLES DETAILS ==================== -->
<a name="section-VariablesDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Variables Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-VariablesDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="_B1config"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">_B1config</h3>
  
  <dl class="fields">
  </dl>
  <dl class="fields">
    <dt>Value:</dt>
      <dd><table><tr><td><pre class="variable">
<code class="variable-group">{</code><code class="variable-quote">'</code><code class="variable-string">2dfilepostfix</code><code class="variable-quote">'</code><code class="variable-op">: </code><code class="variable-quote">'</code><code class="variable-string">.DAT</code><code class="variable-quote">'</code><code class="variable-op">,</code>
 <code class="variable-quote">'</code><code class="variable-string">2dfileprefix</code><code class="variable-quote">'</code><code class="variable-op">: </code><code class="variable-quote">'</code><code class="variable-string">ORG</code><code class="variable-quote">'</code><code class="variable-op">,</code>
 <code class="variable-quote">'</code><code class="variable-string">GCareathreshold</code><code class="variable-quote">'</code><code class="variable-op">: </code>10<code class="variable-op">,</code>
 <code class="variable-quote">'</code><code class="variable-string">GCintsthreshold</code><code class="variable-quote">'</code><code class="variable-op">: </code>1<code class="variable-op">,</code>
 <code class="variable-quote">'</code><code class="variable-string">GCtransmission</code><code class="variable-quote">'</code><code class="variable-op">: </code>None<code class="variable-op">,</code>
 <code class="variable-quote">'</code><code class="variable-string">calibdir</code><code class="variable-quote">'</code><code class="variable-op">: </code><code class="variable-quote">'</code><code class="variable-string">.</code><code class="variable-quote">'</code><code class="variable-op">,</code>
 <code class="variable-quote">'</code><code class="variable-string">detector</code><code class="variable-quote">'</code><code class="variable-op">: </code><code class="variable-quote">'</code><code class="variable-string">Gabriel</code><code class="variable-quote">'</code><code class="variable-op">,</code>
 <code class="variable-quote">'</code><code class="variable-string">detshift</code><code class="variable-quote">'</code><code class="variable-op">: </code>0<code class="variable-op">,</code>
<code class="variable-ellipsis">...</code>
</pre></td></tr></table>
</dd>
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="B1python-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

      <th class="navbar" width="100%"></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Tue Apr 27 11:02:13 2010
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
